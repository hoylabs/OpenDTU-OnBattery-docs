
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Software for ESP32 to talk to Hoymiles Inverters and battery peripherals" name="description"/>
<meta content="OpenDTU Community" name="author"/>
<link href="../device_settings/" rel="prev"/>
<link href="../battery_settings/" rel="next"/>
<link href="../../../favicon.ico" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.49" name="generator"/>
<title>Dynamic Power Limiter (DPL) - OpenDTU-OnBattery Documentation</title>
<link href="../../../assets/stylesheets/main.6f8fc17f.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></link></head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#dynamic-power-limiter-dpl">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="OpenDTU-OnBattery Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="OpenDTU-OnBattery Documentation">
<img alt="logo" src="../../../assets/images/logo.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            OpenDTU-OnBattery Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Dynamic Power Limiter (DPL)
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="black" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5M7 15a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/hoylabs/OpenDTU-OnBattery" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    OpenDTU-OnBattery
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
          
  
  Home

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../hardware/">
          
  
  Hardware

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../">
          
  
  Firmware

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../3rd_party/opendtu_fusion/">
          
  
  3rd Party

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="OpenDTU-OnBattery Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="OpenDTU-OnBattery Documentation">
<img alt="logo" src="../../../assets/images/logo.png"/>
</a>
    OpenDTU-OnBattery Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/hoylabs/OpenDTU-OnBattery" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    OpenDTU-OnBattery
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-ellipsis">
    Home
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Home
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../safety/">
<span class="md-ellipsis">
    Safety
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/">
<span class="md-ellipsis">
    Hardware Support
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Firmware Installation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../troubleshooting/">
<span class="md-ellipsis">
    Troubleshooting
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../faq/">
<span class="md-ellipsis">
    Frequently Asked Questions
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Hardware
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Hardware
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/">
<span class="md-ellipsis">
    Hardware Support
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/inverter_overview/">
<span class="md-ellipsis">
    Inverter Overview
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
<span class="md-ellipsis">
    ESP32 Boards
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            ESP32 Boards
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/recommendations/">
<span class="md-ellipsis">
    Selecting a Board
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/esp32s3_devkit/">
<span class="md-ellipsis">
    ESP32-S3 DevKit
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/esp32_devkit/">
<span class="md-ellipsis">
    ESP32 DevKit
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/esp32nodemcu_38pin/">
<span class="md-ellipsis">
    ESP32 NodeMCU 38 pin
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/olimexpoeiso/">
<span class="md-ellipsis">
    Olimex ESP32-POE-ISO
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
<span class="md-ellipsis">
    RF Modules
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            RF Modules
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/nrf24l01plus/">
<span class="md-ellipsis">
    NRF24L01 Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/cmt2300a/">
<span class="md-ellipsis">
    CMT2300A Module
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/display/">
<span class="md-ellipsis">
    Displays
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/limitations/">
<span class="md-ellipsis">
    Limitations
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/victron_charge_controllers/">
<span class="md-ellipsis">
    Victron Charge Controllers
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/vedirect/">
<span class="md-ellipsis">
    VE.Direct
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
<span class="md-ellipsis">
    Batteries
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_9_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
            Batteries
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_9_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9_1" id="__nav_2_9_1_label" tabindex="0">
<span class="md-ellipsis">
    JK BMS
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_9_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_9_1">
<span class="md-nav__icon md-icon"></span>
            JK BMS
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/jkbms/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/jkbms/models_b/">
<span class="md-ellipsis">
    JK-B* Models
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hardware/jkbms/models_pb/">
<span class="md-ellipsis">
    JK-PB* Models
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
<span class="md-ellipsis">
    Firmware
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Firmware
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    Installation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            Installation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    Firmware Installation
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../flash_esp/">
<span class="md-ellipsis">
    Flash ESP32
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../webinstall/">
<span class="md-ellipsis">
    Community WebFlasher
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../wifi_setup/">
<span class="md-ellipsis">
    Wi-Fi Setup
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    Dynamic Power Limiter
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            Dynamic Power Limiter
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../dpl/">
<span class="md-ellipsis">
    Introduction
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../solar_passthrough/">
<span class="md-ellipsis">
    (Full) Solar-Passthrough
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../battery_interface/">
<span class="md-ellipsis">
    Battery Interface
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    Web UI
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            Web UI
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../login/">
<span class="md-ellipsis">
    Login
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5_2" id="__nav_3_5_2_label" tabindex="0">
<span class="md-ellipsis">
    Live View
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_2_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_5_2">
<span class="md-nav__icon md-icon"></span>
            Live View
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../live_view/">
<span class="md-ellipsis">
    Main
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../live_view_info/">
<span class="md-ellipsis">
    Inverter Info
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../live_view_eventlog/">
<span class="md-ellipsis">
    Eventlog
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../live_view_power/">
<span class="md-ellipsis">
    Power Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../live_view_limit/">
<span class="md-ellipsis">
    Limit Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../live_view_gridprofile/">
<span class="md-ellipsis">
    Grid Profile
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_3_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5_3" id="__nav_3_5_3_label" tabindex="0">
<span class="md-ellipsis">
    Settings
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_3_5_3_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_5_3">
<span class="md-nav__icon md-icon"></span>
            Settings
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../network_settings/">
<span class="md-ellipsis">
    Network Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ntp_settings/">
<span class="md-ellipsis">
    NTP Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../mqtt_settings/">
<span class="md-ellipsis">
    MQTT Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../inverter_settings/">
<span class="md-ellipsis">
    Inverter Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../security_settings/">
<span class="md-ellipsis">
    Security Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dtu_settings/">
<span class="md-ellipsis">
    DTU Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../device_settings/">
<span class="md-ellipsis">
    Device-Manager
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Dynamic Power Limiter (DPL)
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Dynamic Power Limiter (DPL)
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#screenshot">
<span class="md-ellipsis">
      Screenshot
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#settingsparameters">
<span class="md-ellipsis">
      Settings/Parameters
    </span>
</a>
<nav aria-label="Settings/Parameters" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#general">
<span class="md-ellipsis">
      General
    </span>
</a>
<nav aria-label="General" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#enable">
<span class="md-ellipsis">
      Enable
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#govern-inverter">
<span class="md-ellipsis">
      Govern Inverter
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verbose-logging">
<span class="md-ellipsis">
      Verbose Logging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#target-grid-consumption">
<span class="md-ellipsis">
      Target Grid Consumption
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#base-load">
<span class="md-ellipsis">
      Base Load
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hysteresis">
<span class="md-ellipsis">
      Hysteresis
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maximum-total-output">
<span class="md-ellipsis">
      Maximum Total Output
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#individual-inverter-settings">
<span class="md-ellipsis">
      Individual Inverter Settings
    </span>
</a>
<nav aria-label="Individual Inverter Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#power-meter-reading-includes-inverter-output">
<span class="md-ellipsis">
      Power Meter Reading Includes Inverter Output
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inverter-is-powered-by-solar-modules">
<span class="md-ellipsis">
      Inverter Is Powered By Solar Modules
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compensate-for-shading">
<span class="md-ellipsis">
      Compensate For Shading
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#minimum-power-limit">
<span class="md-ellipsis">
      Minimum Power Limit
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maximum-power-limit">
<span class="md-ellipsis">
      Maximum Power Limit
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-inverter-settings">
<span class="md-ellipsis">
      Common Inverter Settings
    </span>
</a>
<nav aria-label="Common Inverter Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-battery-at-night-even-if-only-partially-charged">
<span class="md-ellipsis">
      Use Battery At Night Even If Only Partially Charged
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inverter-used-for-voltage-measurement">
<span class="md-ellipsis">
      Inverter Used For Voltage Measurement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#input-used-for-voltage-measurement">
<span class="md-ellipsis">
      Input Used For Voltage Measurement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automatic-restart-time">
<span class="md-ellipsis">
      Automatic Restart Time
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#solar-passthrough">
<span class="md-ellipsis">
      Solar-Passthrough
    </span>
</a>
<nav aria-label="Solar-Passthrough" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#enable-solar-passthrough">
<span class="md-ellipsis">
      Enable Solar-Passthrough
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-solar-passthrough-losses">
<span class="md-ellipsis">
      (Full) Solar-Passthrough Losses
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#battery-thresholds">
<span class="md-ellipsis">
      Battery Thresholds
    </span>
</a>
<nav aria-label="Battery Thresholds" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-voltage-thresholds-only">
<span class="md-ellipsis">
      Use Voltage Thresholds Only
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#start-threshold-for-battery-discharging">
<span class="md-ellipsis">
      Start Threshold for Battery Discharging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stop-threshold-for-battery-discharging">
<span class="md-ellipsis">
      Stop Threshold for Battery Discharging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-solar-passthrough-start-threshold">
<span class="md-ellipsis">
      Full Solar-Passthrough Start Threshold
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-solar-passthrough-stop-threshold">
<span class="md-ellipsis">
      Full Solar-Passthrough Stop Threshold
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#load-correction-factor">
<span class="md-ellipsis">
      Load correction factor
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5_3_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5_3_9" id="__nav_3_5_3_9_label" tabindex="0">
<span class="md-ellipsis">
    Battery
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_3_9_label" class="md-nav" data-md-level="4">
<label class="md-nav__title" for="__nav_3_5_3_9">
<span class="md-nav__icon md-icon"></span>
            Battery
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../battery_settings/">
<span class="md-ellipsis">
    Battery Settings
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../battery_settings_jkbms/">
<span class="md-ellipsis">
    JK BMS Battery Provider
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../battery_settings_mqtt/">
<span class="md-ellipsis">
    MQTT Battery Provider
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config_settings/">
<span class="md-ellipsis">
    Config Management
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../firmware_upgrade/">
<span class="md-ellipsis">
    Firmware Upgrade
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../device_reboot/">
<span class="md-ellipsis">
    Device Reboot
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5_4" id="__nav_3_5_4_label" tabindex="0">
<span class="md-ellipsis">
    Info
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_4_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_3_5_4">
<span class="md-nav__icon md-icon"></span>
            Info
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../system_info/">
<span class="md-ellipsis">
    System Info
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../network_info/">
<span class="md-ellipsis">
    Network Info
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ntp_info/">
<span class="md-ellipsis">
    NTP Information
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../mqtt_info/">
<span class="md-ellipsis">
    MQTT Information
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../console/">
<span class="md-ellipsis">
    Console
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../about/">
<span class="md-ellipsis">
    About
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../update/">
<span class="md-ellipsis">
    Firmware Update
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../device_profiles/">
<span class="md-ellipsis">
    Device Profiles
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../language_pack/">
<span class="md-ellipsis">
    Language Packs
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../mqtt_topics/">
<span class="md-ellipsis">
    MQTT Topics
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../web_api/">
<span class="md-ellipsis">
    Web API
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
<span class="md-ellipsis">
    Howtos
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_11_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_11">
<span class="md-nav__icon md-icon"></span>
            Howtos
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../howto/serial_console/">
<span class="md-ellipsis">
    Access the serial console
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../howto/migrate_generic/">
<span class="md-ellipsis">
    Migrate 'generic' to 'generic_esp32'
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../howto/upgrade_8mb/">
<span class="md-ellipsis">
    Upgrade to 2024.08.18 or newer
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../howto/upgrade_upstream/">
<span class="md-ellipsis">
    Upgrade from OpenDTU
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
<span class="md-ellipsis">
    Development
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_12_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_12">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../compile_webapp/">
<span class="md-ellipsis">
    Working with the WebApp
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../compile_vscode/">
<span class="md-ellipsis">
    Compile with Visual Studio Code
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../compile_cli/">
<span class="md-ellipsis">
    Compile on CLI
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../license/">
<span class="md-ellipsis">
    License
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    3rd Party
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            3rd Party
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../3rd_party/opendtu_fusion/">
<span class="md-ellipsis">
    OpenDTU Fusion
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../3rd_party/related/">
<span class="md-ellipsis">
    Related Projects
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../3rd_party/cases/">
<span class="md-ellipsis">
    Cases
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../3rd_party/pcb/">
<span class="md-ellipsis">
    PCB Layouts
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../3rd_party/prometheus_database/">
<span class="md-ellipsis">
    Using Prometheus
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#screenshot">
<span class="md-ellipsis">
      Screenshot
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#settingsparameters">
<span class="md-ellipsis">
      Settings/Parameters
    </span>
</a>
<nav aria-label="Settings/Parameters" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#general">
<span class="md-ellipsis">
      General
    </span>
</a>
<nav aria-label="General" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#enable">
<span class="md-ellipsis">
      Enable
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#govern-inverter">
<span class="md-ellipsis">
      Govern Inverter
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#verbose-logging">
<span class="md-ellipsis">
      Verbose Logging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#target-grid-consumption">
<span class="md-ellipsis">
      Target Grid Consumption
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#base-load">
<span class="md-ellipsis">
      Base Load
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#hysteresis">
<span class="md-ellipsis">
      Hysteresis
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maximum-total-output">
<span class="md-ellipsis">
      Maximum Total Output
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#individual-inverter-settings">
<span class="md-ellipsis">
      Individual Inverter Settings
    </span>
</a>
<nav aria-label="Individual Inverter Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#power-meter-reading-includes-inverter-output">
<span class="md-ellipsis">
      Power Meter Reading Includes Inverter Output
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inverter-is-powered-by-solar-modules">
<span class="md-ellipsis">
      Inverter Is Powered By Solar Modules
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#compensate-for-shading">
<span class="md-ellipsis">
      Compensate For Shading
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#minimum-power-limit">
<span class="md-ellipsis">
      Minimum Power Limit
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#maximum-power-limit">
<span class="md-ellipsis">
      Maximum Power Limit
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-inverter-settings">
<span class="md-ellipsis">
      Common Inverter Settings
    </span>
</a>
<nav aria-label="Common Inverter Settings" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-battery-at-night-even-if-only-partially-charged">
<span class="md-ellipsis">
      Use Battery At Night Even If Only Partially Charged
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#inverter-used-for-voltage-measurement">
<span class="md-ellipsis">
      Inverter Used For Voltage Measurement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#input-used-for-voltage-measurement">
<span class="md-ellipsis">
      Input Used For Voltage Measurement
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#automatic-restart-time">
<span class="md-ellipsis">
      Automatic Restart Time
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#solar-passthrough">
<span class="md-ellipsis">
      Solar-Passthrough
    </span>
</a>
<nav aria-label="Solar-Passthrough" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#enable-solar-passthrough">
<span class="md-ellipsis">
      Enable Solar-Passthrough
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-solar-passthrough-losses">
<span class="md-ellipsis">
      (Full) Solar-Passthrough Losses
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#battery-thresholds">
<span class="md-ellipsis">
      Battery Thresholds
    </span>
</a>
<nav aria-label="Battery Thresholds" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-voltage-thresholds-only">
<span class="md-ellipsis">
      Use Voltage Thresholds Only
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#start-threshold-for-battery-discharging">
<span class="md-ellipsis">
      Start Threshold for Battery Discharging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#stop-threshold-for-battery-discharging">
<span class="md-ellipsis">
      Stop Threshold for Battery Discharging
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-solar-passthrough-start-threshold">
<span class="md-ellipsis">
      Full Solar-Passthrough Start Threshold
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#full-solar-passthrough-stop-threshold">
<span class="md-ellipsis">
      Full Solar-Passthrough Stop Threshold
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#load-correction-factor">
<span class="md-ellipsis">
      Load correction factor
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/hoylabs/OpenDTU-OnBattery-docs/edit/main/docs/firmware/configuration/dpl.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
</a>
<a class="md-content__button md-icon" href="https://github.com/hoylabs/OpenDTU-OnBattery-docs/raw/main/docs/firmware/configuration/dpl.md" title="View source of this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
</a>
<h1 id="dynamic-power-limiter-dpl">Dynamic Power Limiter (DPL)</h1>
<h2 id="screenshot">Screenshot</h2>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-type="image" data-width="auto" href="../../../assets/images/screenshots/dpl.png"><img alt="DPL Settings" src="../../../assets/images/screenshots/dpl.png"/></a></p>
<h2 id="settingsparameters">Settings/Parameters</h2>
<div class="admonition warning">
<p class="admonition-title">Dynamic UI</p>
<p>Some settings are not visible/accessible, depending on your setup of
other features, e.g., without a battery interface enabled, SoC thresholds
cannot be configured.</p>
</div>
<h3 id="general">General</h3>
<h4 id="enable">Enable <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Enables or disables the DPL.</p>
<div class="admonition note">
<p class="admonition-title">Disabling</p>
<p>When disabling the DPL using this switch, the inverters previously governed
by the DPL are shut down. Once they are shut down, the DPL does not send
commands to those inverters anymore.</p>
</div>
<h4 id="govern-inverter">Govern Inverter <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Select the inverters, out of all inverters registered to OpenDTU-OnBattery,
that shall receive limit updates calculated by the DPL to match the target grid
consumption.</p>
<h4 id="verbose-logging">Verbose Logging <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Enable to log more information regarding the calculation of the power limits to
the (serial or web) console. Definitely enable this and read the logs if the
DPL does not behave as expected, and share the output in case you seek help.</p>
<h4 id="target-grid-consumption">Target Grid Consumption <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<p>The DPL calculates the inverter limits such that the power meter reads this
amount of power. To implement a zero export policy, set this value to zero. If this
value is negative, the power limits will be calculated such that the configured
power is fed into the grid.</p>
<div class="admonition warning">
<p class="admonition-title">Over- and Undershooting</p>
<p>The inverters <strong>will</strong> over- and undershoot, especially when significant
loads (water heaters, electric stoves, etc.) are switched on or off. In
particular this means that energy will be fed into the grid for some time
(how long depends on the setup) when loads are switched off.</p>
</div>
<h4 id="base-load">Base Load <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<p>In case the power meter reading is unavailable (transient error) or in setups
without a power meter configured, this value is assumed as the power meter
reading. Choose this value such that it is close to but slightly smaller than
your household's base load, i.e., the amount of power that is expected to be
consumed in any case.</p>
<p>In case a power meter is configured, you may set this value to zero if you want
the DPL to effectively disable all governed inverters once the power meter
fails.</p>
<h4 id="hysteresis">Hysteresis <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<p>No limit update will be sent to an inverter if the difference between the
calculated new limit and the current limit, as reported by the inverter, is
less or equal to this hysteresis value.</p>
<h4 id="maximum-total-output">Maximum Total Output <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<div class="admonition danger">
<p class="admonition-title">Cabling limits</p>
<p>This is <strong>NOT</strong> a safety feature. Do not rely on OpenDTU-OnBattery to
protect your cables from excessive currents. Make sure that the AC cabling
is able to safely handle the <strong>rated</strong> output of <strong>all</strong> inverters combined
and enforce protection using respective fuses. The rated output is the
inverter's AC power output while its limit is at 100% and all inputs
deliver such that the inverter does output 100% of its rating, e.g., 2000W
for an HMS-2000. Unreachable inverters can still produce an unknown amount
of power. The maximum total output is available as allowance for all
<strong>other</strong> inverters. Hence, the reachable inverters can potentially produce
as much power as the maximum total output allows, while the unreachable
inverter(s) produce <strong>additional</strong> power.</p>
</div>
<p>The DPL will set limits such that at most this amount of power is generated by
the inverters in total.</p>
<h3 id="individual-inverter-settings">Individual Inverter Settings</h3>
<p>Settings regarding a single particular inverter are grouped in one such card
per governed inverter.</p>
<h4 id="power-meter-reading-includes-inverter-output">Power Meter Reading Includes Inverter Output <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Enable this option if the power meter reading is reduced by the inverter's
output when the inverter produces AC power. This is typically true, as the
metering happens between the grid and the inverter.</p>
<h4 id="inverter-is-powered-by-solar-modules">Inverter Is Powered By Solar Modules <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Enable if the inverter is powered by solar panels rather than a battery. Note
that switches and settings obsolete for setups without any battery-powered
inverters are hidden.</p>
<h4 id="compensate-for-shading">Compensate For Shading <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<div class="admonition note">
<p class="admonition-title">For solar-powered inverters only</p>
<p>This option is only available for solar-powered inverters and is not
included in the screenshot above.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Cabling limits</p>
<p>Do <strong>NOT</strong> enable this option if the AC cabling is potentially unable to
safely handle the <strong>rated</strong> inverter output. The rated output is the
inverter's AC power output while its limit is at 100% and all inputs
deliver such that the inverter does output 100% of its rating, e.g., 2000W
for an HMS-2000. The inverter output can surge over the <strong>configured</strong>
maximum power limit if any input is no longer saturated at the expected
power level, e.g., if the shading of a solar module is removed.</p>
</div>
<p>The calculated limit is usually sent to the inverter verbatim, and the inverter
will output the amount of power equivalent to the calculated limit, as it is
indeed able to draw the needed power from the battery. All inputs draw the same
amount of current.</p>
<p>Enable this option to scale the calculated limit such that the solar-powered
inverter is expected to output the calculated limit, despite significantly
different power being available on the inputs. This usually happens due to
shading of a subset of solar modules. This scaling means that the limit sent to
the inverter is actually higher than the calculated limit, but because some
inputs are saturated, the effective power output is equal to the calculated
limit.</p>
<h4 id="minimum-power-limit">Minimum Power Limit <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<p>In case the calculated limit for the inverter is smaller than this value, the
inverter is actually</p>
<ul>
<li>shut down if the inverter is battery-powered.</li>
<li>set to this minimum power limit if the inverter is solar-powered.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Stable operation</p>
<p>Small power limits can lead to oscillating power output and the inverter
shutting down because of these oscillations. As a rule of thumb, the
minimum limit should be greater or equal to the amount of inverter inputs
times 12W.</p>
</div>
<h4 id="maximum-power-limit">Maximum Power Limit <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<p>The inverter limit is set such that its AC output does not exceed this value.</p>
<h3 id="common-inverter-settings">Common Inverter Settings</h3>
<h4 id="use-battery-at-night-even-if-only-partially-charged">Use Battery At Night Even If Only Partially Charged <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>The inverters may only draw power from the battery during a discharge cycle. A
discharge cycle starts when the respective start threshold is reached. When
enabling this option, a discharge cycle also starts roughly on sunset, even if
the battery charge cycle did not complete.</p>
<p>Enabling this option makes sense if you use a high value for the start
threshold, i.e., a value that translates to the battery being nearly full.
Doing so will prevent battery discharging during the day, but will also prevent
discharging during the night if the start threshold was not reached.</p>
<div class="admonition note">
<p class="admonition-title">Efficiency</p>
<p>With Solar-Passthrough disabled, it is more efficient to choose a low
start threshold and to disable this option, such that produced energy is
used immediately rather than stored in the battery first.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Ending Nighttime Discharging</p>
<p>Discharging the battery always ends when reaching the stop threshold. If a
discharge cycle was previously started because of this option being enabled,
discharging also ends roughly at sunrise, even if the battery still stores
a significant amount of energy.</p>
</div>
<h4 id="inverter-used-for-voltage-measurement">Inverter Used For Voltage Measurement <span class="twemoji" title="Dropdown"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 5h3l-1.5 2zM3 2h18a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2h-5v10c0 1.11-.89 2-2 2H3a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2m0 2v4h11V4zm18 4V4h-5v4zM3 20h11V10H3zm2-8h7v2H5zm0 4h7v2H5z"></path></svg></span></h4>
<p>The battery voltage is read from one input of the selected inverter if no other
source is available to read the battery voltage.</p>
<h4 id="input-used-for-voltage-measurement">Input Used For Voltage Measurement <span class="twemoji" title="Dropdown"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 5h3l-1.5 2zM3 2h18a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2h-5v10c0 1.11-.89 2-2 2H3a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2m0 2v4h11V4zm18 4V4h-5v4zM3 20h11V10H3zm2-8h7v2H5zm0 4h7v2H5z"></path></svg></span></h4>
<p>Define the input of the selected inverter that is used to read the battery
voltage.</p>
<h4 id="automatic-restart-time">Automatic Restart Time <span class="twemoji" title="Dropdown"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 5h3l-1.5 2zM3 2h18a2 2 0 0 1 2 2v4c0 1.11-.89 2-2 2h-5v10c0 1.11-.89 2-2 2H3a2 2 0 0 1-2-2V4c0-1.1.9-2 2-2m0 2v4h11V4zm18 4V4h-5v4zM3 20h11V10H3zm2-8h7v2H5zm0 4h7v2H5z"></path></svg></span></h4>
<div class="admonition danger">
<p class="admonition-title">Persistent Limit</p>
<p>Manually set a low <strong>persistent</strong> limit when using this feature.</p>
</div>
<p>The daily yield of any inverter is usually reset at night when the inverter
turns off due to lack of light. To reset the daily yield even though the
inverter is continuously powered by the battery, all governed battery-powered
inverters can be automatically restarted at the desired time.</p>
<p>After an inverter restarts, it starts producing power. How much power that is
depends on the value set as the persistent limit. Hence the persistent limit
for inverters managed by the DPL shall be very low if they are automatically
restarted. Otherwise, a possibly empty battery is drained with possibly high
power for some time. The DPL will eventually set a new limit or put the
inverter into standby after it restarted.</p>
<h3 id="solar-passthrough">Solar-Passthrough</h3>
<h4 id="enable-solar-passthrough">Enable Solar-Passthrough <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Enables or disables the <a href="../../solar_passthrough/">(Full) Solar-Passthrough</a>
feature.</p>
<h4 id="full-solar-passthrough-losses">(Full) Solar-Passthrough Losses <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<p>Line losses are to be expected when transferring energy from the solar charge
controller(s) to the inverter(s). These losses can be taken into account to
prevent the battery from gradually discharging in (Full) Solar-Passthrough
mode. The power limits to be set on the inverters are additionally reduced by
this factor after taking the respective inverter's efficiency into account.</p>
<h3 id="battery-thresholds">Battery Thresholds</h3>
<p>In general, State of Charge (SoC) thresholds take priority over voltage
thresholds, i.e., if the battery SoC is known (battery interface enabled, SoC
value valid and not outdated) it is used to determine whether or not a
particular threshold is reached.</p>
<h4 id="use-voltage-thresholds-only">Use Voltage Thresholds Only <span class="twemoji" title="Switch"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg></span></h4>
<p>Enable this switch to have the DPL use the voltage thresholds rather than the
SoC thresholds even though the battery SoC is available. As the SoC value is
hard to keep accurate, it is often a good option to start and stop discharging
based on the battery's voltage rather than the reported SoC.</p>
<h4 id="start-threshold-for-battery-discharging">Start Threshold for Battery Discharging <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This threshold is "reached" if the battery SoC or voltage value is greater
or equal to this threshold value.</p>
</div>
<p>Drawing power from the battery is allowed once the battery reaches this
threshold. When this threshold is reached, a discharge cycle begins.</p>
<p>There is no need for this value to be close to the voltage the battery has when
it is fully charged. Using a partially charged battery during the day, while it
is still charging, is acceptable.</p>
<h4 id="stop-threshold-for-battery-discharging">Stop Threshold for Battery Discharging <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This threshold is "reached" if the battery SoC or voltage value is smaller
than this threshold value.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Avoid BMS intervention</p>
<p>When using the voltage stop threshold, it should be chosen such that the
BMS has no need to interfere, i.e., such that the inverter stops
discharging the battery long before the BMS disables discharging the battery
to protect it due to an undervoltage condition.</p>
</div>
<p>Battery discharging is avoided once the battery reaches this threshold.
When this threshold is reached, a charge cycle begins.</p>
<p>This value must be smaller than the battery discharging start threshold.</p>
<h4 id="full-solar-passthrough-start-threshold">Full Solar-Passthrough Start Threshold <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This threshold is "reached" if the battery SoC or voltage value is greater
or equal to this threshold value.</p>
</div>
<p>See the <a href="../../solar_passthrough/">Full Solar-Passthrough documentation</a>.</p>
<p>Set to 0% (SoC threshold) and 66V (voltage threshold) to effectively disable
<strong>Full</strong> Solar-Passthrough while keeping Solar-Passthrough. Otherwise this is
typically set to a value that indicates a (nearly) fully charged battery.</p>
<h4 id="full-solar-passthrough-stop-threshold">Full Solar-Passthrough Stop Threshold <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This threshold is "reached" if the battery voltage value is smaller
than this threshold value.</p>
</div>
<p>See the <a href="../../solar_passthrough/">Full Solar-Passthrough documentation</a>.</p>
<p>When starting Full Solar-Passthrough, the battery stops charging as all solar
power is used by the inverter to produce AC power. This causes the battery
voltage to drop slightly. Due to fluctuations in the solar power output, the
battery might be slightly discharged in Full Solar-Passthrough mode, causing
the battery voltage to drop further. For that reason, this threshold shall be
configured to a slightly smaller value than the Full Solar-Passthrough start
threshold, such that Full Solar-Passthrough is not started and stopped
repeatedly.</p>
<h4 id="load-correction-factor">Load correction factor <span class="twemoji" title="Textbox"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7h5v10h-5v2a1 1 0 0 0 1 1h2v2h-2.5c-.55 0-1.5-.45-1.5-1 0 .55-.95 1-1.5 1H12v-2h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-2V2h2.5c.55 0 1.5.45 1.5 1 0-.55.95-1 1.5-1H20v2h-2a1 1 0 0 0-1 1zM2 7h11v2H4v6h9v2H2zm18 8V9h-3v6z"></path></svg></span></h4>
<div class="admonition note">
<p class="admonition-title">Applicable to voltage thresholds</p>
<p>This setting is only applicable if the DPL is using voltage thresholds.</p>
</div>
<p>When the battery is discharged, its voltage drops. Additionally, depending on
where the battery voltage is read, line losses can significantly influence the
voltage reading, especially at high currents. In both cases, the voltage drop
scales with the discharge current.</p>
<p>In order to not stop the inverter too early (stop threshold) while the battery
is being discharged, this load correction factor can be specified to calculate
(estimate) the battery voltage if it became idle. In other words: This value
should be chosen such that the battery settles back to around the stop
threshold voltage at the moment the DPL decides to stop discharging the battery
because it hit the stop threshold.</p>
<p><code>corrected (idle) voltage = measured battery voltage + (power * correction factor)</code></p>
<p>This value depends on your setup and requires tuning. Assuming a LFP battery
pack, perform the tuning procedure outside the non-linear voltage range, i.e.,
when the battery is neither full nor empty.</p>
<ol>
<li>Disable all battery loads. This possibly means to disable the DPL.</li>
<li>Let the battery settle and note the idle voltage at the point where the DPL
   reads the voltage as well, i.e., the voltage reported by the BMS,
   by the charge controller, or by the inverter input,
   depending on your setup.</li>
<li>Enable a high load with a specific power. This typically means to set your
   inverter to the maximum allowable limit (using the web interface).</li>
<li>Observe the battery voltage drop and note this voltage (load voltage).</li>
<li>Disable the load after a couple of seconds.</li>
<li>The battery voltage should settle back (close) to the idle voltage noted
   earlier.</li>
<li><code>correction factor = (idle voltage - load voltage) / specific power</code></li>
</ol>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Last update">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">March 8, 2025 22:11:27</span>
</span>
<span class="md-source-file__fact">
<span class="md-icon" title="Created">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">August 17, 2024 20:50:30</span>
</span>
</aside>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
       2024 OpenDTU Community  based on <a href="https://opendtu.solar" target="_blank">OpenDTU</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/hoylabs/OpenDTU-OnBattery/discussions" rel="noopener" target="_blank" title="GitHub Discussions">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path></svg>
</a>
<a class="md-social__link" href="https://discord.gg/WzhxEY62mB" rel="noopener" target="_blank" title="Discord Chat">
<svg viewbox="0 0 640 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.path", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.follow", "navigation.path", "search.suggest", "content.tooltips", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
<script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
<script src="../../../assets/javascript/tablesort.js"></script>
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script><script>document$.subscribe(() => {
            window.update_swagger_ui_iframe_height = function (id) {
                var iFrameID = document.getElementById(id);
                if (iFrameID) {
                    full_height = (iFrameID.contentWindow.document.body.scrollHeight + 80) + "px";
                    iFrameID.height = full_height;
                    iFrameID.style.height = full_height;
                }
            }
        
            let iframe_id_list = []
            var iframes = document.getElementsByClassName("swagger-ui-iframe");
            for (var i = 0; i < iframes.length; i++) { 
                iframe_id_list.push(iframes[i].getAttribute("id"))
            }
        
            let ticking = true;
            
            document.addEventListener('scroll', function(e) {
                if (!ticking) {
                    window.requestAnimationFrame(()=> {
                        let half_vh = window.innerHeight/2;
                        for(var i = 0; i < iframe_id_list.length; i++) {
                            let element = document.getElementById(iframe_id_list[i])
                            if(element==null){
                                return
                            }
                            let diff = element.getBoundingClientRect().top
                            if(element.contentWindow.update_top_val){
                                element.contentWindow.update_top_val(half_vh - diff)
                            }
                        }
                        ticking = false;
                    });
                    ticking = true;
                }
            });
        
            const dark_scheme_name = "slate"
            
            window.scheme = document.body.getAttribute("data-md-color-scheme")
            const options = {
                attributeFilter: ['data-md-color-scheme'],
            };
            function color_scheme_callback(mutations) {
                for (let mutation of mutations) {
                    if (mutation.attributeName === "data-md-color-scheme") {
                        scheme = document.body.getAttribute("data-md-color-scheme")
                        var iframe_list = document.getElementsByClassName("swagger-ui-iframe")
                        for(var i = 0; i < iframe_list.length; i++) {
                            var ele = iframe_list.item(i);
                            if (ele) {
                                if (scheme === dark_scheme_name) {
                                    ele.contentWindow.enable_dark_mode();
                                } else {
                                    ele.contentWindow.disable_dark_mode();
                                }
                            }
                        }
                    }
                }
            }
            observer = new MutationObserver(color_scheme_callback);
            observer.observe(document.body, options);
            })</script></body>
</html>